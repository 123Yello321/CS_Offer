MySQL官方对索引的定义为：`索引（Index）是帮助MySQL高效获取数据的数据结构`。提取句子主干，就可以得到索引的本质：索引是数据结构。

我们知道，数据库查询是数据库的最主要功能之一。我们都希望查询数据的速度能尽可能的快，因此数据库系统的设计者会从查询算法的角度进行优化。

最基本的查询算法当然是顺序查找（linear search），这种复杂度为O(n)的算法在数据量很大时显然是糟糕的，好在计算机科学的发展提供了很多更优秀的查找算法，例如二分查找（binary search）、二叉树查找（binary tree search）等。如果稍微分析一下会发现，每种查找算法都只能应用于特定的数据结构之上，例如二分查找要求被检索数据有序，而二叉树查找只能应用于二叉查找树上，但是数据本身的组织结构不可能完全满足各种数据结构（例如，理论上不可能同时将两列都按顺序进行组织）。

所以，在数据之外，数据库系统还维护着`满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法`。这种数据结构，就是索引。

## 索引分类

从数据结构角度看，索引分为以下几类：

1. B+树索引：最常见的索引类型，基于B-Tree数据结构。B-Tree的基本思想是，所有值（被索引的列）都是排过序的，每个叶节点到跟节点距离相等。所以B-Tree适合用来查找某一范围内的数据，而且可以直接支持数据排序（ORDER BY）。但是当索引多列时，列的顺序特别重要，需要格外注意。InnoDB和MyISAM都支持B-Tree索引。InnoDB用的是一个变种B+Tree，而MyISAM为了节省空间对索引进行了压缩，从而牺牲了性能。
2. hash索引：基于hash表。所以这种索引只支持精确查找，不支持范围查找，不支持排序。其检索效率非常高，检索可以一次定位，不像B-Tree 索引需要从根节点到枝节点，最后才能访问到页节点这样多次的IO访问，所以 Hash 索引的查询效率要远高于 B-Tree 索引。目前只有Memory引擎支持显式的hash索引，Memory引擎默认的索引类型即是Hash索引，虽然它也支持B-Tree索引。
3. FULLTEXT索引：主要用来查找文本中的关键字，而不是直接与索引中的值相比较。Full-text索引跟其它索引大不相同，它更像是一个搜索引擎，而不是简单的 WHERE 语句的参数匹配。可以对某列分别进行full-text索引和B-Tree索引，两者互不冲突。Full-text索引配合MATCH AGAINST操作使用，而不是一般的WHERE语句加LIKE。
4. Spatial (R-Tree)（空间）索引：只有MyISAM引擎支持，并且支持的不好。

从物理存储角度来看，索引分为以下几类：

1. 聚集索引（clustered index）：在InnoDB中，表数据文件本身就是按B+Tree组织的一个索引结构，这棵树的叶节点data域保存了完整的数据记录。这个索引的key是数据表的主键，因此InnoDB表数据文件本身就是主索引。
2. 非聚集索引（non-clustered index）：MyISAM的索引文件仅仅保存数据记录的地址，这种索引方式叫做`非聚集索引`。在MyISAM中，主索引和辅助索引（Secondary key）在结构上没有任何区别，只是主索引要求key是唯一的，而辅助索引的key可以重复。

从逻辑角度来看，索引分为以下几类：

* 主键索引：主键其实就是一个索引（特殊的唯一索引），但是这个索引跟一般的索引有所不同。主键所在的列里的每一个的记录都是唯一的，也就是说不能在主键里出现相同的记录，在同一个表里只能有一个主键。
* 唯一索引：唯一索引`不允许两行具有相同的索引值`。如果现有数据中存在重复的键值，则大多数数据库都不允许将新创建的唯一索引与表一起保存。当新数据将使表中的键值重复时，数据库也拒绝接受此数据。例如，如果在 employee 表中的职员姓氏(lname) 列上创建了唯一索引，则所有职员不能同姓。
* 普通索引或者单列索引：普通索引允许关键字段有相同值。在一对多关系的多方，可以使用普通索引。
* 多列索引（复合索引）：索引可以包含一个、两个或更多个列。两个或更多个列上的索引被称作复合索引。对索引中的所有列执行搜索或仅对前几列执行搜索时，复合索引非常有用；仅对后面的任意列执行搜索时，复合索引则没有用处。使用复合索引时遵循最左前缀集合。

主键索引、唯一索引的区别：

* 主键一定是唯一性索引，其索引名为 primary，唯一性索引并不一定是主键（对于主健，oracle/sql server/mysql等都会自动建立唯一索引）；
* 一个表中可以有多个唯一性索引，但只能有一个主键索引；
* 主键列不允许空值，而唯一性索引列允许空值；
* 主健索引列可作外健，唯一索引列不可作外键；
* 主键不一定只包含一个字段，所以在主键的其中一个字段建唯一索引还是必要的；

~~应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描。~~

［[索引字段不唯一](https://www.nowcoder.com/questionTerminal/1fbc72e6a9964221ab1f8bb674775869)］  
［[不能使用索引，执行速度最慢的语句](http://www.nowcoder.com/questionTerminal/e3bdb7479ace47bd900816726549d48b)］  
［[执行效率最高的搜索语句](http://www.nowcoder.com/questionTerminal/af0b24bb3e6241c4992a0d8e7b79fc85)］  

# 更多内容

[MySQL索引背后的数据结构及算法原理](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)   
[主键与唯一索引的区别](http://blog.mimvp.com/2015/03/the-difference-between-primary-key-and-unique-index/)  


